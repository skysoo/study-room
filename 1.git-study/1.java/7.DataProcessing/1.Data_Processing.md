# 실시간 데이터 처리 방안
Source가 RDB이면서 실시간성 처리가 가능하게 할 수 있는 방안은?

Source DB로 부터 Target DB로 데이터를 전달하는 방법은 2가지를 생각할 수 있다.

첫번째 방법은 Source DB와 Target DB 사이에 ETL 처리를 해줄 모듈을 하나 두는 것이다.
ETL 모듈은 배치성을 띄며, Source DB로 부터 일정 주기마다 데이터를 읽어와서 Target DB에 저장한다.

두번째 방법은 Source DB에 데이터가 쌓이는 즉시 이벤트성으로 Target DB에 데이터를 적재하는 방안이다.

전자는 Batch에 대한 이해도가 뒷받침 된다면 구현이 그렇게 까다롭지 않다. 다만, 배치를 싱글(단일 스레드)로 두었을 경우이고, 멀티 JVM 배치를 둔다면 조금 더 까다로울 것이다.

단일 스레드 배치는 순차 실행이므로 속도에 한계가 분명하고 하나의 긴 작업이 전체 배치 성능에 영향을 미친다. 따라서 Spring Batch에서는 배치를 병렬로 처리할 수 있는 여러 방안을 제안한다.

1. 싱글 스레드일 경우
    1. Cursor 방식 (반 실시간?)
DB 커넥션을 맺은 후, 커서를 한칸씩 옮기면서 지속적으로 데이터를 스트리밍한다.
하지만 이 역시 단위는 배치이기 때문에(커서는 하나의 커넥션으로 하나의 배치가 끝날때까지 유지한다.) 배치 수행 시간이 길다면 App의 타임아웃을 충분히 늘려주고, 너무 오래 걸리는 경우는 지양하자.

2. 

후자를 구현하는 방법도 여러가지가 있다.


# Spring Batch 병렬 처리
1. 멀티스레드 Step

| 장단점 | 설명 |
| :----- | :--- |
| 장점   | 스레드 풀을 활용해서 Chunk 단위별로 병렬 처리한다.     |
| 단점   | 실패 지점에서 재시작하는 것은 불가능하다.     |


# ETL vs CDC
